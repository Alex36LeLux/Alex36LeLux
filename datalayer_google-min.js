if($(".shop-item").length>0){let a=[];$(".shop-item").each((function(){let e=$(this),t=e.data("codigo"),r=e.data("precio"),o=e.data("nombre"),c=e.data("categoria");a.push({name:o,id:t,price:r,brand:"Aloe Plus Lanzarote",category:c,dimension2:IDIOMAACT})})),dataLayer.push({ecommerce:{currencyCode:"EUR",impressions:a}})}function dtl_AddProductCarrito(a,e){if(e<0)return dtlayerRemoveFromCart(a,Math.abs(e)),!0;var t="#lin"+a,r=$(t).data("codigo"),o=$(t).data("precio");dtlayerAddtocart(e,r,$(t).data("nombre"),o,$(t).data("categoria"))}function dtlayerAddtocart(a,e,t,r,o){dataLayer.push({event:"addToCart",ecommerce:{currencyCode:"EUR",add:{products:[{name:t,id:e,price:r,brand:"Aloe Plus Lanzarote",category:o,quantity:a,dimension2:IDIOMAACT}]}}})}function dtlayerRemoveFromCart(a,e){var t="#lin"+a,r=$(t).data("codigo"),o=$(t).data("precio"),c=$(t).data("nombre"),d=$(t).data("categoria");dataLayer.push({event:"removeFromCart",ecommerce:{currencyCode:"EUR",add:{products:[{name:c,id:r,price:o,brand:"Aloe Plus Lanzarote",category:d,quantity:e,dimension2:IDIOMAACT}]}}})}function dtlayertipoacceso(a){var e=productosEnCarro();dataLayer.push({event:"checkout",ecommerce:{checkout:{actionField:{step:1,option:a},products:e}}})}function dtlayertipopago(a){var e=productosEnCarro();dataLayer.push({event:"checkout",ecommerce:{checkout:{actionField:{step:2,option:a},products:e}}})}function dtlayerviewbasket(){var a=productosEnCarro();dataLayer.push({event:"viewBasket",item:a})}function productosEnCarro(){var a=paisSelected(),e={csrfmiddlewaretoken:CSRFTOKEN,idpais:a,OrigenLLamada:"DataLayer func productosEnCarro"},t=OtrosParam(),r=Object.assign(e,t),o=[];return $.ajax({type:"POST",url:PREFIJO_IDIOMA+"/cart/get",async:!1,data:r,success:function(a){for(var e=a.productos,t=0,r=e.length;t<r;t++){var c=e[t];o.push({id:c.referencia,name:c.nombre,price:c.precio,brand:"Aloe Plus Lanzarote",caterory:c.categoriaprincipal,quantity:c.cantidad})}},dataType:"json"}),o}function dtlayerPurchase(a){$.ajax({type:"POST",url:"/json-pedido-datalayer",async:!1,data:{numpedido:a,csrfmiddlewaretoken:CSRFTOKEN},success:function(e){var t=e.ecommerce;dataLayer.push({event:"purchase",ecommerce:t}),dataLayer.push({event:"trackTransaction",id:a,item:t.purchase.products})},dataType:"json"})}$(".iradetalle").click((function(){var a=$(".lista").data("lista"),e="#producto_"+$(this).data("pid"),t=$(e).data("codigo"),r=$(e).data("precio"),o=$(e).data("nombre"),c=$(e).data("categoria");dataLayer.push({event:"productClick",ecommerce:{detail:{actionField:{list:a},products:[{name:o,id:t,price:r,brand:"Aloe Plus Lanzarote",category:c,dimension2:IDIOMAACT}]}}})}));